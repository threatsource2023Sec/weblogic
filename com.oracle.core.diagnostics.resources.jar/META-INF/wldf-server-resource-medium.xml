<?xml version='1.0' encoding='UTF-8'?>
<wldf-resource xmlns="http://xmlns.oracle.com/weblogic/weblogic-diagnostics" xmlns:sec="http://www.bea.com/ns/weblogic/90/security" xmlns:wls="http://www.bea.com/ns/weblogic/90/security/wls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.oracle.com/weblogic/weblogic-diagnostics http://xmlns.oracle.com/weblogic/weblogic-diagnostics/2.0/weblogic-diagnostics.xsd">

  <name>wldf-server-medium</name>

  <harvester>
    <name>wldf-server-medium</name>
    <sample-period>60000</sample-period>
    <harvested-type>
      <name>weblogic.management.runtime.JRockitRuntimeMBean</name>
      <harvested-attribute>HeapFreePercent</harvested-attribute>
      <harvested-attribute>FreePhysicalMemory</harvested-attribute>
      <harvested-attribute>FreeHeap</harvested-attribute>
      <harvested-attribute>JvmProcessorLoad</harvested-attribute>
      <harvested-attribute>TotalNumberOfThreads</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JVMRuntimeMBean</name>
      <harvested-attribute>HeapFreePercent</harvested-attribute>
      <harvested-attribute>HeapSizeCurrent</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.ThreadPoolRuntimeMBean</name>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <harvested-attribute>HoggingThreadCount</harvested-attribute>
      <harvested-attribute>PendingUserRequestCount</harvested-attribute>
      <harvested-attribute>StandbyThreadCount</harvested-attribute>
      <harvested-attribute>StuckThreadCount</harvested-attribute>
      <harvested-attribute>Throughput</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.ApplicationRuntimeMBean</name>
      <harvested-attribute>OverallHealthState.State</harvested-attribute>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.ConnectorConnectionPoolRuntimeMBean</name>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <harvested-attribute>ActiveConnectionsCurrentCount</harvested-attribute>
      <harvested-attribute>ActiveConnectionsHighCount</harvested-attribute>
      <harvested-attribute>NumUnavailableCurrentCount</harvested-attribute>
      <harvested-attribute>NumWaitersCurrentCount</harvested-attribute>
      <harvested-attribute>PoolSizeHighWaterMark</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JDBCServiceRuntimeMBean</name>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JDBCDataSourceRuntimeMBean</name>
      <harvested-attribute>ActiveConnectionsAverageCount</harvested-attribute>
      <harvested-attribute>ActiveConnectionsCurrentCount</harvested-attribute>
      <harvested-attribute>ConnectionDelayTime</harvested-attribute>
      <harvested-attribute>CurrCapacity</harvested-attribute>
      <harvested-attribute>FailedReserveRequestCount</harvested-attribute>
      <harvested-attribute>FailuresToReconnectCount</harvested-attribute>
      <harvested-attribute>LeakedConnectionCount</harvested-attribute>
      <harvested-attribute>NumAvailable</harvested-attribute>
      <harvested-attribute>ReserveRequestCount</harvested-attribute>
      <harvested-attribute>WaitingForConnectionCurrentCount</harvested-attribute>
      <harvested-attribute>WaitingForConnectionFailureTotal</harvested-attribute>
      <harvested-attribute>WaitSecondsHighCount</harvested-attribute>
      <harvested-attribute>State</harvested-attribute>
      <harvested-attribute>PrepStmtCacheHitCount</harvested-attribute>
      <harvested-attribute>PrepStmtCacheMissCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSRuntimeMBean</name>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <harvested-attribute>ConnectionsCurrentCount</harvested-attribute>
      <harvested-attribute>ConnectionsHighCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSServerRuntimeMBean</name>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <harvested-attribute>MessagesCurrentCount</harvested-attribute>
      <harvested-attribute>MessagesPendingCount</harvested-attribute>
      <harvested-attribute>MessagesHighCount</harvested-attribute>
      <harvested-attribute>BytesCurrentCount</harvested-attribute>
      <harvested-attribute>BytesPendingCount</harvested-attribute>
      <harvested-attribute>BytesHighCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSConsumerRuntimeMBean</name>
      <harvested-attribute>MessagesPendingCount</harvested-attribute>
      <harvested-attribute>MessagesReceivedCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSDestinationRuntimeMBean</name>
      <harvested-attribute>ConsumersCurrentCount</harvested-attribute>
      <harvested-attribute>MessagesCurrentCount</harvested-attribute>
      <harvested-attribute>MessagesPendingCount</harvested-attribute>
      <harvested-attribute>MessagesReceivedCount</harvested-attribute>
      <harvested-attribute>MessagesThresholdTime</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSProducerRuntimeMBean</name>
      <harvested-attribute>MessagesSentCount</harvested-attribute>
      <harvested-attribute>MessagesPendingCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JMSConnectionRuntimeMBean</name>
      <harvested-attribute>SessionsHighCount</harvested-attribute>
      <harvested-attribute>SessionsCurrentCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JTARecoveryRuntimeMBean</name>
      <harvested-attribute>InitialRecoveredTransactionTotalCount</harvested-attribute>
      <harvested-attribute>RecoveredTransactionCompletionPercent</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.JTARuntimeMBean</name>
      <harvested-attribute>ActiveTransactionsTotalCount</harvested-attribute>
      <harvested-attribute>SecondsActiveTotalCount</harvested-attribute>
      <harvested-attribute>TransactionAbandonedTotalCount</harvested-attribute>
      <harvested-attribute>TransactionCommittedTotalCount</harvested-attribute>
      <harvested-attribute>TransactionHeuristicsTotalCount</harvested-attribute>
      <harvested-attribute>TransactionRolledBackTotalCount</harvested-attribute>
      <harvested-attribute>TransactionTotalCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.ServerRuntimeMBean</name>
      <harvested-attribute>OpenSocketsCurrentCount</harvested-attribute>
      <harvested-attribute>State</harvested-attribute>
      <harvested-attribute>HealthState.State</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.ServerLogRuntimeMBean</name>
      <harvested-attribute>LoggedMessagesCountbySeverity(Error,Alert,Critical,Emergency, Warning)</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
     <harvested-type>
      <name>weblogic.management.runtime.WebAppComponentRuntimeMBean</name>
      <harvested-attribute>OpenSessionsCurrentCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.TransactionResourceRuntimeMBean</name>
      <harvested-attribute>TransactionHeuristicCommitTotalCount</harvested-attribute>
      <harvested-attribute>TransactionHeuristicHazardTotalCount</harvested-attribute>
      <harvested-attribute>TransactionHeuristicMixedTotalCount</harvested-attribute>
      <harvested-attribute>TransactionHeuristicRollbackTotalCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.WorkManagerRuntimeMBean</name>
      <harvested-attribute>CompletedRequests</harvested-attribute>
      <harvested-attribute>PendingRequests</harvested-attribute>
      <harvested-attribute>StuckThreadCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.EJBCacheRuntimeMBean</name>
      <harvested-attribute>ActivationCount</harvested-attribute>
      <harvested-attribute>CacheAccessCount</harvested-attribute>
      <harvested-attribute>CachedBeansCurrentCount</harvested-attribute>
      <harvested-attribute>CacheMissCount</harvested-attribute>
      <harvested-attribute>PassivationCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.EJBLockingRuntimeMBean</name>
      <harvested-attribute>LockEntriesCurrentCount</harvested-attribute>
      <harvested-attribute>LockManagerAccessCount</harvested-attribute>
      <harvested-attribute>TimeoutTotalCount</harvested-attribute>
      <harvested-attribute>WaiterCurrentCount</harvested-attribute>
      <harvested-attribute>WaiterTotalCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.EJBPoolRuntimeMBean</name>
      <harvested-attribute>AccessTotalCount</harvested-attribute>
      <harvested-attribute>BeansInUseCurrentCount</harvested-attribute>
      <harvested-attribute>DestroyedTotalCount</harvested-attribute>
      <harvested-attribute>MissTotalCount</harvested-attribute>
      <harvested-attribute>PooledBeansCurrentCount</harvested-attribute>
      <harvested-attribute>TimeoutTotalCount</harvested-attribute>
      <harvested-attribute>WaiterCurrentCount</harvested-attribute>
      <harvested-attribute>WaiterTotalCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.EJBTimerRuntimeMBean</name>
      <harvested-attribute>ActiveTimerCount</harvested-attribute>
      <harvested-attribute>CancelledTimerCount</harvested-attribute>
      <harvested-attribute>DisabledTimerCount</harvested-attribute>
      <harvested-attribute>TimeoutCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.EJBTransactionRuntimeMBean</name>
      <harvested-attribute>TransactionsCommittedTotalCount</harvested-attribute>
      <harvested-attribute>TransactionsRolledBackTotalCount</harvested-attribute>
      <harvested-attribute>TransactionsTimedOutTotalCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.MessageDrivenEJBRuntimeMBean</name>
      <harvested-attribute>ProcessedMessageCount</harvested-attribute>
      <harvested-attribute>SuspendCount</harvested-attribute>
      <harvested-attribute>JMSConnectionAlive</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
    <harvested-type>
      <name>weblogic.management.runtime.QueryCacheRuntimeMBean</name>
      <harvested-attribute>CacheAccessCount</harvested-attribute>
      <harvested-attribute>CacheHitCount</harvested-attribute>
      <harvested-attribute>CacheMissByBeanEvictionCount</harvested-attribute>
      <harvested-attribute>CacheMissByDependentQueryMissCount</harvested-attribute>
      <harvested-attribute>CacheMissByRelatedQueryMissCount</harvested-attribute>
      <harvested-attribute>CacheMissByTimeoutCount</harvested-attribute>
      <harvested-attribute>TotalCachedQueriesCount</harvested-attribute>
      <harvested-attribute>TotalCacheMissCount</harvested-attribute>
      <namespace>ServerRuntime</namespace>
    </harvested-type>
  </harvester>

  <watch-notification>
    <!-- 
    NOTE: The following are provided as examples of useful watch rules that users might
    wish to clone for their own purposes.  When cloning a custom WLDF System Resource
    to use them, you will need to set the enabled attribute below to true in order
    for them to work!
     -->
    <enabled>false</enabled>
    <watch>
      <name>SERVER.WORKMANAGER.STUCKTHREAD </name>
      <rule-type>Harvester</rule-type>
      <rule-expression>wls.runtime.query('com.bea:Type=WorkManagerRuntime,*', 'StuckThreadCount').stream().anyMatch( x -&gt; x &gt; 0 )</rule-expression>
      <expression-language>EL</expression-language>
      <notification>SERVER.PROFILE</notification>
    </watch>
    <watch>
      <name>SERVER.HOGGING.THREADCOUNT </name>
      <rule-type>Harvester</rule-type>
      <rule-expression>wls.runtime.serverRuntime.threadPoolRuntime.hoggingThreadCount &gt;= 10</rule-expression>
      <expression-language>EL</expression-language>
      <notification>SERVER.PROFILE</notification>
    </watch>
    <watch>
      <name>SERVER.PENDING.USER.REQUESTCOUNT </name>
      <rule-type>Harvester</rule-type>
      <rule-expression>wls.runtime.serverRuntime.threadPoolRuntime.pendingUserRequestCount &gt;= 100</rule-expression>
      <expression-language>EL</expression-language>
      <notification>SERVER.PROFILE</notification>
    </watch>
    <watch>
      <name>SERVER.LOG.SEVERITY</name>
      <rule-type>Log</rule-type>
      <rule-expression>(log.severityString == 'Error')</rule-expression>
      <expression-language>EL</expression-language>
      <notification>SERVER.PROFILE</notification>
    </watch>
    <watch>
      <name>SERVER.RESTART.REQUIRED</name>
      <enabled>true</enabled>
      <rule-type>Harvester</rule-type>
      <rule-expression>(wls.runtime.serverRuntime.restartRequired == true)</rule-expression>
      <expression-language>EL</expression-language>
      <alarm-type>AutomaticReset</alarm-type>
      <alarm-reset-period>900000</alarm-reset-period>
      <notification>SERVER.PROFILE</notification>
    </watch>
    <jmx-notification>
      <name> SERVER.PROFILE </name>
    </jmx-notification>
  </watch-notification>

</wldf-resource>
