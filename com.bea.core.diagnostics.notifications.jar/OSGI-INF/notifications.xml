<?xml version="1.0" encoding="UTF-8"?>
<tns:services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.bea.com/ns/msa/sds http://www-beace/beace-site/6.0/com.bea.core.configuration.sds/schema/sds.xsd"
 xmlns:tns="http://www.bea.com/ns/msa/sds">

  <!-- 
  Publish the NotificationServiceFactory singleton as an OSGI service
  -->
  <service>
   	<service-display-name>NotificationServiceFactory</service-display-name>
    <implementation-description>
	    <class>com.bea.diagnostics.notifications.NotificationServiceFactory</class>
	    <method>getInstance</method>
    </implementation-description>
	  <osgi-service-classes>
	    <osgi-service-class>com.bea.diagnostics.notifications.NotificationServiceFactory</osgi-service-class>
	  </osgi-service-classes>
	  <disposition>immediate</disposition>
 		<!-- if the CE MBS is configured, make this reference required -->
	  <!-- 
	  <references>
    	<reference>
    		<instance-set-method>setMBeanServer</instance-set-method>
        <osgi-service-class>javax.management.MBeanServer</osgi-service-class>
       	<required>false</required>
       	<configured-link> 
       		<link-configuration-type>
       			com.bea.core.jmx.server.JMX
       		</link-configuration-type>
       		<link-target-property xsi:nil="true"/>
       		<validate>false</validate>
       	</configured-link>
    	</reference>
   	</references>
   	 -->
	  <preparer>prepare</preparer>
	  <activator>activate</activator>
	  <destructor>deactivate</destructor>
  </service>

  <!-- 
  JMX Notification Service
  -->
  <service>
   	<service-display-name>JMXNotificationService</service-display-name>
    <configuration-type>com.bea.diagnostics.notifications.JMXNotification</configuration-type>
    <bean-like-map>true</bean-like-map>
    <implementation-description>
	    <class>com.bea.diagnostics.notifications.NotificationServiceFactory</class>
	    <method>getInstance.createJMXNotificationService</method>
	    <argument>
		    <name>serviceName</name>
	    </argument>
	    <argument>
	      <name>notifierObjectName</name>
	    </argument>
	    <argument>
	      <name>jmxNotificationType</name>
	    </argument>
	    <reference-argument>mbeanServer</reference-argument>
	    <argument>
	      <name>jmxCustomizerClass</name>
	    </argument>
   </implementation-description>
	  <osgi-service-classes>
	    <osgi-service-class>com.bea.diagnostics.notifications.JMXNotificationService</osgi-service-class>
	  </osgi-service-classes>
	  <disposition>immediate</disposition>
	  <keys>
	  	<key>
	  		<name>Name</name>
        <instance-set-method xsi:nil="true"/>
	  	</key>
	  </keys>
 	  <references>
 	  	<!-- Require both the Factory and JMX services to be available -->
	    <reference>
	    	<!-- Require the factory service to be up and running -->
        <osgi-service-class>
        	com.bea.diagnostics.notifications.NotificationServiceFactory
        </osgi-service-class>
        <required>true</required>
	    </reference>
	    <!-- This might be temporary until the ordering of optionally-required refs is fixed -->
	    <reference>
	      <reference-identifier>mbeanServer</reference-identifier>
	      <osgi-service-class>javax.management.MBeanServer</osgi-service-class>
       	<required>false</required>
       	<configured-link> 
       		<link-configuration-type>
       			com.bea.core.jmx.server.JMX
       		</link-configuration-type>
       		<link-target-property xsi:nil="true"/>
       		<validate>false</validate>
       	</configured-link>
	    </reference>
	  </references>
	  <activator>initialize</activator>
	  <destructor>destroy</destructor>
  </service>

  <!-- 
  JMS Notification Service
  -->
  <service>
   	<service-display-name>JMSNotificationService</service-display-name>
  	<configuration-type>com.bea.diagnostics.notifications.JMSNotification</configuration-type>
  	<bean-like-map>true</bean-like-map>
    <type-configuration-an-instance>true</type-configuration-an-instance>
    <implementation-description>
	    <class>com.bea.diagnostics.notifications.NotificationServiceFactory</class>
	    <method>getInstance.createJMSNotificationService</method>
	    <argument>
		    <name>serviceName</name>
	    </argument>
	    <argument>
	      <name>destinationJNDIName</name>
	    </argument>
	    <argument>
	      <name>connectionFactoryJNDIName</name>
	    </argument>
	    <argument>
	      <name>jndiProperties</name>
	      <java-type>java.util.Properties</java-type>
	    </argument>
	    <argument>
	      <name>jmsCustomizerClass</name>
	    </argument>
    </implementation-description>
	  <osgi-service-classes>
	    <osgi-service-class>com.bea.diagnostics.notifications.JMSNotificationService</osgi-service-class>
	  </osgi-service-classes>
	  <disposition>immediate</disposition>
	  <keys>
	  	<key>
	  		<name>Name</name>
	  	</key>
	  </keys>
	  <references>
	    <reference>
	    	<!-- Require the factory service to be up and running -->
        <osgi-service-class>
        	com.bea.diagnostics.notifications.NotificationServiceFactory
        </osgi-service-class>
        <required>true</required>
	    </reference>
	  </references>
	  <activator>initialize</activator>
	  <destructor>destroy</destructor>
  </service>
  
  <!-- 
  SMTP Notification Service
   -->
  <service>
   	<service-display-name>SMTPNotificationService</service-display-name>
  	<configuration-type>com.bea.diagnostics.notifications.SMTPNotification</configuration-type>
  	<bean-like-map>true</bean-like-map>
    <implementation-description>
	    <class>com.bea.diagnostics.notifications.NotificationServiceFactory</class>
	    <method>getInstance.createSMTPNotificationService</method>
	    <argument>
	    	<name>serviceName</name>
	    </argument>
	    <argument>
	    	<name>sessionProperties</name>
	    	<java-type>java.util.Properties</java-type>
	    </argument>
	    <argument>
	    	<name>recipientList</name>
	    </argument>
	    <argument>
	    	<name>subject</name>
	    </argument>
	    <argument>
	    	<name>body</name>
	    </argument>
	    <argument>
	    	<name>smtpCustomizerClass</name>
	    </argument>
	    <argument>
	    	<name>authenticatorClass</name>
	    </argument>
    </implementation-description>
	  <osgi-service-classes>
	    <osgi-service-class>com.bea.diagnostics.notifications.SMTPNotificationService</osgi-service-class>
	  </osgi-service-classes>
	  <disposition>immediate</disposition>
	  <keys>
	  	<key>
	  		<name>Name</name>
	  	</key>
	  </keys>
	  <references>
	    <reference>
	    	<!-- Require the factory service to be up and running -->
        <osgi-service-class>
        	com.bea.diagnostics.notifications.NotificationServiceFactory
        </osgi-service-class>
        <required>true</required>
	    </reference>
	  </references>
	  <activator>initialize</activator>
	  <destructor>destroy</destructor>
  </service>
  
  <!-- 
  SNMP Notification Service
  -->
  <service>
   	<service-display-name>SNMPNotificationService</service-display-name>
  	<configuration-type>com.bea.diagnostics.notifications.SNMPNotification</configuration-type>
  	<bean-like-map>true</bean-like-map>
    <implementation-description>
	    <class>com.bea.diagnostics.notifications.NotificationServiceFactory</class>
	    <method>getInstance.createSNMPNotificationService</method>
	    <argument>
	    	<name>serviceName</name>
	    </argument>
	    <argument>
	    	<name>trapName</name>
	    </argument>
	    <argument>
	    	<name>snmpAgent</name>
	    </argument>
	    <argument>
	      <name>varToKeyMap</name>
	      <java-type>java.util.Map</java-type>
	    </argument>
	    <argument>
	    	<name>snmpCustomizerClass</name>
	    </argument>
    </implementation-description>
	  <osgi-service-classes>
	    <osgi-service-class>com.bea.diagnostics.notifications.SNMPNotificationService</osgi-service-class>
	  </osgi-service-classes>
	  <disposition>immediate</disposition>
	  <keys>
	  	<key>
	  		<name>Name</name>
	  	</key>
	  </keys>
	  <references>
	    <reference>
    		<instance-set-method>setSnmpAgent</instance-set-method>
	      <osgi-service-class>weblogic.diagnostics.snmp.agent.SNMPAgentConfig</osgi-service-class>
	      <required>true</required>
	      <target-property>
	        <name>snmpAgentName</name>
	      	<bean-get-method>getName</bean-get-method>
	      </target-property>
	    </reference>
	    <reference>
	    	<!-- Require the factory service to be up and running -->
        <osgi-service-class>
        	com.bea.diagnostics.notifications.NotificationServiceFactory
        </osgi-service-class>
        <required>true</required>
	    </reference>
	  </references>
	  <activator>initialize</activator>
	  <destructor>destroy</destructor>
  </service>
	  
</tns:services>
